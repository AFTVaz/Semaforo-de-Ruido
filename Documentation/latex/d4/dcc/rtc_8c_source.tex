\doxysection{rtc.\+c}
\hypertarget{rtc_8c_source}{}\label{rtc_8c_source}\index{C:/LEETC/SE/MCUXpressoIDE\_11.10.0\_3148/workspace/NSP/DRIVERS/src/rtc.c@{C:/LEETC/SE/MCUXpressoIDE\_11.10.0\_3148/workspace/NSP/DRIVERS/src/rtc.c}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00002}00002\ \textcolor{comment}{\ *\ rtc.c}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00003}00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00004}00004\ \textcolor{comment}{\ *\ \ Created\ on:\ 05/11/2024}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00005}00005\ \textcolor{comment}{\ *\ \ \ \ \ \ Author:\ Andr√©\ Vaz\ (48209)\ e\ Emilio\ Mendes\ (48170)}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00006}00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00009}00009\ \textcolor{preprocessor}{\#ifdef\ \_\_USE\_CMSIS}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}LPC17xx.h"{}}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00011}00011\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00013}00013\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00014}00014\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00015}00015\ \textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00016}00016\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{rtc_8h}{rtc.h}}"{}}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00018}\mbox{\hyperlink{group__RTC_ga3001452592b562e69fb10ca12a242cbb}{00018}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{group__RTC_ga3001452592b562e69fb10ca12a242cbb}{compareByTime}}(\textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ tm\ *a,\ \textcolor{keyword}{const}\ \textcolor{keyword}{struct}\ tm\ *b)\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00019}00019\ \ \ \ \ \textcolor{keywordtype}{int}\ res\ =\ a-\/>tm\_sec\ -\/\ b-\/>tm\_sec;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00020}00020\ \ \ \ \ \textcolor{keywordflow}{if}(res\ !=\ 0)\ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00021}00021\ \ \ \ \ res\ =\ a-\/>tm\_min\ -\/\ b-\/>tm\_min;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00022}00022\ \ \ \ \ \textcolor{keywordflow}{if}(res\ !=\ 0)\ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00023}00023\ \ \ \ \ res\ =\ a-\/>tm\_hour\ -\/\ b-\/>tm\_hour;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00024}00024\ \ \ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00025}00025\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00027}\mbox{\hyperlink{group__RTC_ga8ce39fc6eece59a57c6343c3ee52cbf5}{00027}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__RTC_ga8ce39fc6eece59a57c6343c3ee52cbf5}{RTC\_Init}}\ (\ time\_t\ seconds\ )\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00028}00028\ \ \ \ \ LPC\_SC-\/>PCONP\ |=\ (1\ <<\ \mbox{\hyperlink{group__RTC_gabd8357ae3c4cf413eb6380e1369761be}{RTC\_PCONP\_ENABLE}});}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00030}00030\ \ \ \ \ LPC\_RTC-\/>CCR\ =\ \string~(\ 1\ <<\ \mbox{\hyperlink{group__RTC_gaf6eafece7bf5fc0acb7101b612fb1b67}{CLKEN\_BIT\_POS}});\ \ \ \ \ \textcolor{comment}{//Clock\ disable}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00032}00032\ \ \ \ \ \mbox{\hyperlink{group__RTC_gacefa177b35b24cdd98a156950f7d051b}{RTC\_SetSeconds}}(seconds);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00034}00034\ \ \ \ \ LPC\_RTC-\/>CCR\ =\ (1\ <<\ \mbox{\hyperlink{group__RTC_gaf6eafece7bf5fc0acb7101b612fb1b67}{CLKEN\_BIT\_POS}});\ \ \ \ \ \ \ \textcolor{comment}{//Clock\ enable}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00035}00035\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00037}\mbox{\hyperlink{group__RTC_gace61f28fc849bb1b75c4cec0be8bd830}{00037}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__RTC_gace61f28fc849bb1b75c4cec0be8bd830}{RTC\_GetTimeDate}}(\ \textcolor{keyword}{struct}\ tm\ *dateTime\ )\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00038}00038\ \ \ \ \ uint32\_t\ CTIME0\ =\ LPC\_RTC-\/>CTIME0;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00039}00039\ \ \ \ \ uint32\_t\ CTIME1\ =\ LPC\_RTC-\/>CTIME1;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00040}00040\ \ \ \ \ uint32\_t\ CTIME2\ =\ LPC\_RTC-\/>CTIME2;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00042}00042\ \ \ \ \ dateTime-\/>tm\_sec\ =\ (\mbox{\hyperlink{group__RTC_gaf60728c8060f7714e406e6d5b763db5d}{CTIME\_SEC\_MASK}}\ \&\ CTIME0);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00043}00043\ \ \ \ \ dateTime-\/>tm\_min\ =\ (\mbox{\hyperlink{group__RTC_ga7a0b4532dc505e1452ef46c4dd855b3e}{CTIME\_MIN\_MASK}}\ \&\ CTIME0)\ >>\ 8;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00044}00044\ \ \ \ \ dateTime-\/>tm\_hour\ =\ (\mbox{\hyperlink{group__RTC_ga7436f41eab7acb47e6064aab49da77fa}{CTIME\_HOUR\_MASK}}\ \&\ CTIME0)\ >>\ 16;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00045}00045\ \ \ \ \ dateTime-\/>tm\_wday\ =\ (\mbox{\hyperlink{group__RTC_gad3a19e7a4dc1187943b637d2337c7da5}{CTIME\_DOW\_MASK}}\ \&\ CTIME0)\ >>\ 24;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00046}00046\ \ \ \ \ dateTime-\/>tm\_mday\ =\ (\mbox{\hyperlink{group__RTC_ga769db2115d896b0d38ea7abefd4b9ed7}{CTIME\_DOM\_MASK}}\ \&\ CTIME1);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00047}00047\ \ \ \ \ dateTime-\/>tm\_mon\ =\ ((\mbox{\hyperlink{group__RTC_ga6d31a8c255161c0f8825ad2704a161e6}{CTIME\_MONTH\_MASK}}\ \&\ CTIME1)\ >>\ 8)\ -\/\ 1;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00048}00048\ \ \ \ \ dateTime-\/>tm\_year\ =\ ((\mbox{\hyperlink{group__RTC_ga04d5919603e9d0012b4cb239a80ae1e3}{CTIME\_YEAR\_MASK}}\ \&\ CTIME1)\ >>\ 16)\ -\/\ 1900;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00049}00049\ \ \ \ \ dateTime-\/>tm\_yday\ =\ (\mbox{\hyperlink{group__RTC_ga575f3362f38d03e5c923ac06f47ed5f4}{CTIME\_DOY\_MASK}}\ \&\ CTIME2)\ -\/\ 1;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00050}00050\ \ \ \ \ dateTime-\/>tm\_isdst\ =\ 0;\ \ \ \ \ \textcolor{comment}{//Daylight\ Saving\ is\ not\ in\ effect}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00051}00051\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00053}\mbox{\hyperlink{group__RTC_ga6547833680b375126353be4952b7edc9}{00053}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__RTC_ga6547833680b375126353be4952b7edc9}{RTC\_SetTimeDate}}(\ \textcolor{keyword}{struct}\ tm\ *dateTime\ )\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00054}00054\ \ \ \ \ \textcolor{keyword}{struct\ }tm\ testTime;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00055}00055\ \ \ \ \ \mbox{\hyperlink{group__RTC_gace61f28fc849bb1b75c4cec0be8bd830}{RTC\_GetTimeDate}}(\ \&testTime\ );}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00057}00057\ \ \ \ \ \textcolor{keywordflow}{while}(\mbox{\hyperlink{group__RTC_ga3001452592b562e69fb10ca12a242cbb}{compareByTime}}(\&testTime,\ dateTime))\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00059}00059\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>CCR\ =\ \string~(\ 1\ <<\ \mbox{\hyperlink{group__RTC_gaf6eafece7bf5fc0acb7101b612fb1b67}{CLKEN\_BIT\_POS}});\ \ \ \ \ \textcolor{comment}{//Clock\ disable}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>SEC\ =\ dateTime-\/>tm\_sec;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00062}00062\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>MIN\ =\ dateTime-\/>tm\_min;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00063}00063\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>HOUR\ =\ dateTime-\/>tm\_hour;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00064}00064\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>DOM\ =\ dateTime-\/>tm\_mday;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00065}00065\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>DOW\ =\ dateTime-\/>tm\_wday;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00066}00066\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>DOY\ =\ dateTime-\/>tm\_yday\ +\ 1;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00067}00067\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>MONTH\ =\ dateTime-\/>tm\_mon\ +\ 1;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00068}00068\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>YEAR\ =\ dateTime-\/>tm\_year\ +\ 1900;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00070}00070\ \ \ \ \ \ \ \ \ LPC\_RTC-\/>CCR\ =\ (1\ <<\ \mbox{\hyperlink{group__RTC_gaf6eafece7bf5fc0acb7101b612fb1b67}{CLKEN\_BIT\_POS}});\ \ \ \ \ \ \ \textcolor{comment}{//Clock\ enable}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00072}00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group__RTC_gace61f28fc849bb1b75c4cec0be8bd830}{RTC\_GetTimeDate}}(\ \&testTime\ );}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00073}00073\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00074}00074\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00076}\mbox{\hyperlink{group__RTC_gacefa177b35b24cdd98a156950f7d051b}{00076}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__RTC_gacefa177b35b24cdd98a156950f7d051b}{RTC\_SetSeconds}}(\ time\_t\ seconds\ )\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00078}00078\ \ \ \ \ \textcolor{keyword}{struct\ }tm\ *time\ =\ localtime(\&seconds);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00079}00079\ \ \ \ \ \mbox{\hyperlink{group__RTC_ga6547833680b375126353be4952b7edc9}{RTC\_SetTimeDate}}(time);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00081}00081\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00083}\mbox{\hyperlink{group__RTC_gaed5e5912abe16282e6934f5c108f4ca9}{00083}}\ time\_t\ \mbox{\hyperlink{group__RTC_gaed5e5912abe16282e6934f5c108f4ca9}{RTC\_GetSeconds}}(\ \textcolor{keywordtype}{void}\ )\{}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00085}00085\ \ \ \ \ \textcolor{keyword}{struct\ }tm\ dtime;}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00086}00086\ \ \ \ \ \mbox{\hyperlink{group__RTC_gace61f28fc849bb1b75c4cec0be8bd830}{RTC\_GetTimeDate}}(\&dtime);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00087}00087\ \ \ \ \ \textcolor{keywordflow}{return}\ mktime(\&dtime);}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00089}00089\ \}}
\DoxyCodeLine{\Hypertarget{rtc_8c_source_l00090}00090\ }

\end{DoxyCode}
